<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Zapatos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Pantalla de Login -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <h1>ü•æ Mi Emprendimiento</h1>
            <div class="login-form">
                <input type="email" id="username" placeholder="Email" autocomplete="email">
                <input type="password" id="password" placeholder="Contrase√±a" autocomplete="current-password">
                <button id="login-btn" class="btn-primary">Iniciar Sesi√≥n</button>
                <div id="login-error" class="error-message"></div>
            </div>
        </div>
    </div>

    <!-- Men√∫ Principal -->
    <div id="menu-screen" class="screen">
        <header class="app-header">
            <h2>Gesti√≥n de Zapatos</h2>
            <button id="logout-btn" class="btn-icon">üö™</button>
        </header>
        <div class="menu-container">
            <div class="menu-card" id="menu-pedidos">
                <div class="menu-icon">üì¶</div>
                <h3>Pedidos</h3>
                <p>Gestiona tus pedidos</p>
            </div>
            <div class="menu-card" id="menu-clientes">
                <div class="menu-icon">üë•</div>
                <h3>Clientes</h3>
                <p>Administra clientes</p>
            </div>
        </div>
    </div>

    <!-- Pantalla de Pedidos -->
    <div id="pedidos-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-pedidos">‚Üê</button>
            <h2>Pedidos</h2>
        </header>
        <div class="submenu-container">
            <button class="submenu-btn" id="btn-nuevo-pedido">+ Nuevo Pedido</button>
            <button class="submenu-btn" id="btn-historial-pedidos">üìã Historial</button>
        </div>
    </div>

    <!-- Pantalla Nuevo Pedido -->
    <div id="nuevo-pedido-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-nuevo-pedido">‚Üê</button>
            <h2>Nuevo Pedido</h2>
        </header>
        <div class="form-container">
            <div class="items-section">
                <h3>Items del Pedido</h3>
                <div id="items-list"></div>
                <button type="button" class="btn-secondary" id="add-item-form">+ Agregar Item</button>
            </div>

            <div class="item-form" id="item-form" style="display: none;">
                <h4 id="item-form-title">Nuevo Item</h4>
                <div class="form-group">
                    <label>Cliente</label>
                    <select id="item-cliente">
                        <option value="">Seleccionar cliente...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Categor√≠a</label>
                    <select id="item-categoria" onchange="handleCategoriaChange()">
                        <option value="Zapato">Zapato</option>
                        <option value="Ropa">Ropa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ID Price Shoes</label>
                    <input type="text" id="item-id-price" placeholder="Ej: PS-12345">
                </div>
                <div class="form-group">
                    <label>Marca</label>
                    <input type="text" id="item-marca" placeholder="Ej: Nike, Adidas">
                </div>
                <div class="form-group">
                    <label>N√∫mero/Talla</label>
                    <input type="text" id="item-numero" placeholder="Ej: 25, M, L">
                </div>
                <div class="form-group">
                    <label>Price Shoes</label>
                    <input type="number" id="item-price-shoes" placeholder="0.00" step="0.01">
                </div>
                <div class="form-group">
                    <label>Precio Final</label>
                    <input type="number" id="item-precio-final" placeholder="0.00" step="0.01">
                </div>
                
                <!-- Ubicaci√≥n para Zapatos -->
                <div class="form-group" id="ubicacion-zapato-group">
                    <label>Ubicaci√≥n</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <span style="flex-shrink: 0;">Pasillo</span>
                        <input type="number" id="ubicacion-pasillo" placeholder="N√∫mero" style="flex: 1;" min="1">
                    </div>
                </div>
                
                <!-- Ubicaci√≥n para Ropa -->
                <div class="form-group" id="ubicacion-ropa-group" style="display: none;">
                    <label>Ubicaci√≥n</label>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="radio" id="ubicacion-ropa-colgada" name="ubicacion-ropa" value="R colgada" checked>
                            <label for="ubicacion-ropa-colgada" style="margin: 0;">R colgada</label>
                            <input type="number" id="ubicacion-rcolgada-num" placeholder="N√∫mero" style="flex: 1; margin-left: 10px;" min="1">
                        </div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="radio" id="ubicacion-ropa-mesa" name="ubicacion-ropa" value="Mesa">
                            <label for="ubicacion-ropa-mesa" style="margin: 0;">Mesa</label>
                            <input type="number" id="ubicacion-mesa-num" placeholder="N√∫mero" style="flex: 1; margin-left: 10px;" min="1">
                        </div>
                    </div>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button type="button" class="btn-secondary" id="cancel-item" style="width: 50%;">Cancelar</button>
                    <button type="button" class="btn-primary" id="save-item" style="width: 50%;">Guardar Item</button>
                </div>
            </div>

            <div class="total-section">
                <div style="margin-bottom: 10px;">
                    <strong>Total Items:</strong> <span id="total-items">0</span>
                </div>
                <div style="margin-bottom: 10px;">
                    <strong>Total Price Shoes:</strong> $<span id="total-price-shoes">0.00</span>
                </div>
                <div>
                    <strong>Total Precio Final:</strong> $<span id="total-precio-final">0.00</span>
                </div>
            </div>

            <button class="btn-primary" id="guardar-pedido">üíæ Guardar Pedido</button>
        </div>
    </div>

    <!-- Pantalla Historial Pedidos -->
    <div id="historial-pedidos-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-historial-pedidos">‚Üê</button>
            <h2>Historial de Pedidos</h2>
        </header>
        <div class="list-container" id="historial-list"></div>
        <div class="pagination-container">
            <button class="btn-secondary" id="cargar-mas-pedidos" style="width: 100%;">Cargar m√°s pedidos</button>
        </div>
    </div>

    <!-- Pantalla Detalle de Pedido Individual -->
    <div id="detalle-pedido-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-detalle-pedido">‚Üê</button>
            <h2 id="detalle-pedido-folio">Pedido</h2>
        </header>
        <div class="form-container">
            <div id="detalle-pedido-info" class="detalle-info-card"></div>
            <h3 style="margin: 20px 0 10px 0;">Items del Pedido</h3>
            <div id="detalle-pedido-items"></div>
        </div>
    </div>

    <!-- Pantalla de Clientes -->
    <div id="clientes-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-clientes">‚Üê</button>
            <h2>Clientes</h2>
        </header>
        <div class="submenu-container">
            <button class="submenu-btn" id="btn-nuevo-cliente">+ Nuevo Cliente</button>
            <button class="submenu-btn" id="btn-catalogo-clientes">üìñ Cat√°logo</button>
        </div>
    </div>

    <!-- Pantalla Nuevo Cliente -->
    <div id="nuevo-cliente-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-nuevo-cliente">‚Üê</button>
            <h2>Nuevo Cliente</h2>
        </header>
        <div class="form-container">
            <div class="form-group">
                <label>Nombre</label>
                <input type="text" id="cliente-nombre" placeholder="Nombre">
            </div>
            <div class="form-group">
                <label>Apellido</label>
                <input type="text" id="cliente-apellido" placeholder="Apellido">
            </div>
            <div class="form-group">
                <label>WhatsApp</label>
                <input type="tel" id="cliente-whatsapp" placeholder="5512345678">
            </div>
            <button class="btn-primary" id="guardar-cliente">üíæ Guardar Cliente</button>
        </div>
    </div>

    <!-- Pantalla Cat√°logo Clientes -->
    <div id="catalogo-clientes-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-catalogo">‚Üê</button>
            <h2>Cat√°logo de Clientes</h2>
        </header>
        <div class="list-container" id="catalogo-list"></div>
    </div>

    <!-- Pantalla Detalle Cliente -->
    <div id="detalle-cliente-screen" class="screen">
        <header class="app-header">
            <button class="btn-back" id="back-detalle-cliente">‚Üê</button>
            <h2 id="detalle-cliente-nombre">Cliente</h2>
        </header>
        <div class="detail-container">
            <div class="summary-cards">
                <div class="summary-card red">
                    <span class="label">Debe</span>
                    <span class="amount" id="debe-total">$0.00</span>
                </div>
                <div class="summary-card green">
                    <span class="label">Pagado</span>
                    <span class="amount" id="pagado-total">$0.00</span>
                </div>
                <div class="summary-card blue">
                    <span class="label">Resta</span>
                    <span class="amount" id="resta-total">$0.00</span>
                </div>
            </div>

            <div class="section-tabs">
                <button class="tab-btn active" data-tab="deudas">Deudas</button>
                <button class="tab-btn" data-tab="abonos">Abonos</button>
                <button class="tab-btn" data-tab="pedidos">Pedidos</button>
            </div>

            <div class="tab-content active" id="tab-deudas">
                <button class="btn-secondary" id="add-deuda">+ Agregar Deuda</button>
                <div id="deudas-list"></div>
            </div>

            <div class="tab-content" id="tab-abonos">
                <button class="btn-secondary" id="add-abono">+ Agregar Abono</button>
                <div id="abonos-list"></div>
            </div>

            <div class="tab-content" id="tab-pedidos">
                <div id="pedidos-cliente-list"></div>
            </div>

            <button class="btn-whatsapp" id="enviar-whatsapp">
                üì± Enviar Estado de Cuenta por WhatsApp
            </button>
        </div>
    </div>

    <!-- Modal de notificaci√≥n -->
    <div id="modal-notification" class="modal">
        <div class="modal-content">
            <div class="modal-notification-icon" id="modal-notification-icon">‚ÑπÔ∏è</div>
            <h3 id="modal-notification-title">Informaci√≥n</h3>
            <p id="modal-notification-message"></p>
            <div class="modal-buttons">
                <button class="btn-secondary" id="modal-notification-cancel">Cancelar</button>
                <button class="btn-primary" id="modal-notification-confirm">Aceptar</button>
            </div>
        </div>
    </div>

    <!-- Modal de prompt -->
    <div id="modal-prompt" class="modal">
        <div class="modal-content">
            <h3 id="modal-prompt-title">Ingrese el valor</h3>
            <div class="form-group">
                <input type="text" id="modal-prompt-input" placeholder="Escribe aqu√≠...">
            </div>
            <div class="modal-buttons">
                <button class="btn-secondary" id="modal-prompt-cancel">Cancelar</button>
                <button class="btn-primary" id="modal-prompt-confirm">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal para detalles de pedido -->
    <div id="modal-detalle-pedido" class="modal">
        <div class="modal-content modal-large">
            <h3 id="modal-detalle-titulo">Detalles del Pedido</h3>
            <div id="modal-detalle-contenido" class="modal-detalle-items"></div>
            <button class="btn-primary" id="modal-detalle-close">Cerrar</button>
        </div>
    </div>

    <!-- Modal para agregar deuda -->
    <div id="modal-deuda" class="modal">
        <div class="modal-content">
            <h3>Agregar Deuda</h3>
            <div class="form-group">
                <label>Nombre del Item</label>
                <input type="text" id="modal-deuda-nombre" placeholder="Descripci√≥n">
            </div>
            <div class="form-group">
                <label>Monto</label>
                <input type="number" id="modal-deuda-monto" placeholder="0.00" step="0.01">
            </div>
            <div class="modal-buttons">
                <button class="btn-secondary" id="modal-deuda-cancel">Cancelar</button>
                <button class="btn-primary" id="modal-deuda-save">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal para agregar abono -->
    <div id="modal-abono" class="modal">
        <div class="modal-content">
            <h3>Agregar Abono</h3>
            <div class="form-group">
                <label>Monto</label>
                <input type="number" id="modal-abono-monto" placeholder="0.00" step="0.01">
            </div>
            <div class="form-group">
                <label>Fecha</label>
                <input type="date" id="modal-abono-fecha">
            </div>
            <div class="modal-buttons">
                <button class="btn-secondary" id="modal-abono-cancel">Cancelar</button>
                <button class="btn-primary" id="modal-abono-save">Guardar</button>
            </div>
        </div>
    </div>

    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js"></script>
</body>
</html>